<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Melomaniac | Setup</title>
    <link rel="stylesheet" href="styles.css" />
  </head>
  <body data-view="setup">
    <header>
      <nav class="nav">
        <div class="brand">
          <div class="brand-badge">M</div>
          <span>Melomaniac</span>
        </div>
        <div class="nav-links">
          <a data-nav="participant">Participants</a>
          <a data-nav="host">Host</a>
          <a data-nav="setup">Setup</a>
          <a data-nav="points">Points</a>
        </div>
        <div class="nav-actions">
          <select id="contest-select"></select>
          <button id="new-contest">New contest</button>
          <button id="spotify-connect" class="ghost">Connect Spotify</button>
          <span id="spotify-status" class="pill">Spotify: not connected</span>
        </div>
      </nav>
    </header>

    <main>
      <section class="hero">
        <div>
          <h1>Contest setup</h1>
          <p>
            Load your topics and songs, then pull tracks straight from Spotify.
          </p>
        </div>
        <div class="status-card">
          <small>Contest name</small>
          <input id="contest-name" type="text" placeholder="Contest name" style="margin-top: 8px; width: 100%; padding: 8px 10px; border-radius: 10px; border: 1px solid rgba(31, 42, 46, 0.2);" />
          <button id="save-setup" style="margin-top: 12px;">Save setup</button>
        </div>
      </section>

      <section class="panel">
        <p class="muted">
          Tip: paste a Spotify track link or search below. When you assign a track,
          Melomaniac stores the Spotify URI in the slot. MP3/OGG links still work.
        </p>
      </section>

      <section class="setup-layout">
        <div class="setup-side">
          <div class="panel">
            <h3 class="panel-title">Pick a slot</h3>
            <p class="muted">Click a circle to edit that song level.</p>
          </div>
          <section id="setup-board" class="board"></section>
        </div>
        <div class="setup-side">
          <div class="panel setup-editor">
            <h3 class="panel-title">Slot details</h3>
            <div class="field-row">
              <label>Topic label</label>
              <input id="topic-label" type="text" placeholder="Topic label" />
            </div>
            <div class="field-row">
              <label>Level</label>
              <input id="level-number" type="text" disabled />
            </div>
            <div class="field-row">
              <label>Artist</label>
              <input id="song-artist" type="text" placeholder="Artist" />
            </div>
            <div class="field-row">
              <label>Title</label>
              <input id="song-title" type="text" placeholder="Title" />
            </div>
            <div class="field-row">
              <label>Audio URL / Spotify URI</label>
              <input id="song-url" type="text" placeholder="Paste Spotify track link or audio URL" />
            </div>
            <div class="field-actions">
              <button id="clear-slot" class="ghost">Clear slot</button>
              <button id="reset-used" class="ghost">Re-enable song</button>
              <button id="apply-slot">Apply changes</button>
            </div>
          <p id="slot-preview" class="muted">Select a slot to edit.</p>
        </div>

          <div class="panel setup-search">
            <h3 class="panel-title">Spotify search</h3>
            <div class="field-row">
              <label>Search</label>
              <input id="spotify-query" type="text" placeholder="Type a song or artist" />
            </div>
            <div class="field-actions">
              <button id="spotify-search" class="ghost">Search Spotify</button>
            </div>
            <div id="spotify-results" class="search-results"></div>
            <p id="spotify-hint" class="muted">Connect Spotify to search.</p>
          </div>
        </div>
      </section>
    </main>

    <script src="spotify.js"></script>
    <script src="app.js"></script>
  </body>
</html>
